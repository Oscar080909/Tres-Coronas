<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Producto - TRES CORONAS</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>

<!-- FLECHA REGRESAR -->
<a href="index.html" class="btn-volver">‚Üê</a>

<main class="detalle-producto">

    <img id="img-producto" src="" alt="Producto">

    <h2 id="nombre-producto"></h2>
    <p id="precio-producto"></p>

    <!-- CANTIDAD -->
    <div class="cantidad-selector">
        <button id="menos">-</button>
        <input type="number" id="cantidad" value="1" min="1">
        <button id="mas">+</button>
    </div>

    <!-- AGREGAR AL CARRITO -->
    <button id="btn-agregar" class="btn-agregar">Agregar al carrito</button>
    <button id="ir-carrito" class="btn-carrito">Ir al Carrito</button>


</main>

<script>
    // ===== TEMA CLARO / OSCURO =====
const savedTheme = localStorage.getItem("theme");
if (savedTheme === "dark") {
    document.body.classList.add("dark-theme");
}

let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
const producto = JSON.parse(localStorage.getItem("productoSeleccionado"));

if (producto) {
    document.getElementById("img-producto").src = producto.imagen;
    document.getElementById("nombre-producto").textContent = producto.nombre;
    document.getElementById("precio-producto").textContent = "$" + producto.precio;
}

// botones cantidad
document.getElementById("mas").onclick = () => {
    document.getElementById("cantidad").value++;
};

document.getElementById("menos").onclick = () => {
    const input = document.getElementById("cantidad");
    if (input.value > 1) input.value--;
};

// agregar al carrito
document.getElementById("btn-agregar").onclick = () => {
    const cantidad = parseInt(document.getElementById("cantidad").value);

    const existe = carrito.find(item => item.nombre === producto.nombre);

    if (existe) {
        existe.cantidad += cantidad;
    } else {
        carrito.push({
            nombre: producto.nombre,
            precio: producto.precio,
            imagen: producto.imagen,
            cantidad
        });
    }

    localStorage.setItem("carrito", JSON.stringify(carrito));
    alert("Producto agregado al carrito üõí");
};

// ir al carrito
document.getElementById("ir-carrito").onclick = () => {
    window.location.href = "carrito.html";
};

</script>

</body>
</html>